<ng-form name="dim_options_form">
<!-- dimension name -->
<div class="form-group">
    <div class="row">
        <label class="col-xs-12 col-sm-3 control-label no-padding-right font-color-default">Name</label>
        <div class="col-xs-12 col-sm-9">
            <input type="text" placeholder="Name.." class="form-control" name="dim_name"
                   tooltip="dimension name.." tooltip-trigger="focus"
                   ng-model="newDimensionOption.name" required ng-if="state.mode=='edit'" />
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="text-warning" ng-if="dim_options_form.dim_name.$error.required && dim_options_form.dim_name.$dirty">
                The Dimension Name is required.
            </div>
        </div>
    </div>
</div>

<!-- Whether Include Foreign Key -->
<div class="form-group" ng-if="newDimensionOption.dimCol.isLookup">
    <div class="row">
        <label class="control-label font-color-default col-sm-5" >
            Include Foreign Key
        </label>
        <label class="col-sm-7">
            <input type="checkbox" class="ace ace-switch ace-switch-5"
                   ng-model="newDimensionOption.status.includeFK" >
            <span class="lbl middle"></span>
        </label>
    </div>
</div>

<!-- hierarchy and derived -->
<div class="tabbable form-group nav-tabs-custom">
    <ul class="nav nav-tabs">
        <li class="active">
            <a data-toggle="tab" href="#hierarchy">Hierarchy</a>
        </li>
        <li>
            <a data-toggle="tab" href="#derived">Derived</a>
        </li>
    </ul>
    <!-- border css here since widget-main erases the border -->
    <div class="tab-content">
        <!--Hierarchy-->
        <div id="hierarchy" class="tab-pane active">
            <div class="form-group">
                <div class="row">
                    <label class="control-label font-color-default col-sm-3" >
                        <b>Hierarchy</b>
                    </label>
                    <label class="col-sm-6">
                        <input type="checkbox" class="ace ace-switch ace-switch-5"
                               ng-click="toggleHierarchy(newDimensionOption)"
                               ng-model="newDimensionOption.status.useHierarchy" >
                        <span class="lbl middle"></span>
                    </label>
                </div>
            </div>
            <!--Use Hierarchy-->
            <table ng-if="newDimensionOption.status.useHierarchy && newDimensionOption.hierarchy.length" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th style="width: 10%">Level</th>
                    <th style="width: 80%">Column</th>
                    <th style="width: 10%"></th>
                </tr>
                </thead>
                <tbody ng-if="state.mode=='edit'">
                <tr ng-repeat="hierarchyIndex in [] | range: newDimensionOption.hierarchy.length">
                    <td style="width: 10%; vertical-align:middle; text-align: center" >
                        <input ng-model="newDimensionOption.hierarchy[$index].level" placeholder="Level.."
                               tooltip="dimension hierarchy level.." tooltip-trigger="focus"
                               style="height: 30px; text-align: center; width: 100%" class="form-control"/>
                    </td>
                    <td style="width: 80%">
                        <select chosen style="width: 100%"
                                data-placeholder="Dimension Hierarchy Column"
                                ng-model="newDimensionOption.hierarchy[$index].column"
                                ng-options="columns.name as columns.name for columns in getColumnsByTable(newDimensionOption.dimCol.table)" >
                            <option value="">-- Select Column --</option>
                        </select>
                    </td>
                    <td style="width: 10%; vertical-align:middle" >
                        <button class="btn btn-xs btn-danger" style="cursor: pointer " tooltip="Delete"
                                ng-click="removeElement(newDimensionOption.hierarchy, newDimensionOption.hierarchy[$index])">
                            <i class="fa fa-trash-o"></i>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="form-group" ng-show="newDimensionOption.status.useHierarchy">
                <div class="row">
                    <div class="col-sm-3">
                        <button class="btn btn-xs btn-info"
                                ng-click="addNewHierarchy(newDimensionOption);">
                            <i class="fa fa-plus"></i> New Hierarchy</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Derived-->
        <div id="derived" class="tab-pane">
            <div class="form-group">
                <div ng-repeat="derived in newDimensionOption.derived track by $index">
                    <div>
                        <select chosen style="width:85%;" width="200"
                                data-placeholder="Derived Columns.."
                                ng-model="newDimensionOption.derived[$index]"
                                ng-options="columns.name as columns.name for columns in getColumnsByTable(newDimensionOption.dimCol.table)" >
                            <option value=""></option>
                        </select>
                        <button class="btn btn-xs btn-danger" style="cursor: pointer " tooltip="Delete"
                                ng-click="removeElement(newDimensionOption.derived, newDimensionOption.derived[$index])">
                            <i class="fa fa-trash-o"></i>
                        </button>
                        <div class="space-4"></div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-sm-3">
                        <button class="btn btn-xs btn-info" ng-click="addNewDerived(newDimensionOption);">
                            <i class="fa fa-plus"></i> New Derived</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</ng-form>
